var story = $('#story-<%= params[:story_id] %>');

story
  .removeClass('collapsed')
  .after('<%=j render partial: "relevant_comments/comment" %>');

story.find('a.show-comments')
  .removeClass('show-comments')
  .addClass('hide-comments')
  .html('- Hide most relevant comments');

$('#story-<%= params[:story_id] %>').find('a.hide-comments').on('click', function(event) {
  event.preventDefault();
  event.stopPropagation();

  $('#story-<%= params[:story_id] %>')
    .addClass('collapsed')
    .siblings('div.comments').remove();

  $(this)
    .html('+ Show most relevent comments')
    .addClass('show-comments')
    .removeClass('hode-comments')
    .off('click');
});
